---
import '@/global/global.scss'
import Analytics from '@/components/analytics/Analytics.astro'
import { getLangFromPath } from '@/global/languages'
import OrganizationSchema from '../Schema/OrganizationSchema.astro'
import Footer from './Footer.astro'
import Header from './Header.astro'
import CookieConsent from '@/components/cookie-consent/CookieConsent.astro'
import Head, { type HeadProps } from './Head.astro'
import Toast from '../components/ui/Toast.astro'
import BotIdInit from '@/components/global/BotIdInit.astro'

type Props = HeadProps & {
  minify?: boolean
}

const { minify = false, ...props } = Astro.props as Props

const lang = getLangFromPath(Astro.url.pathname)
---

<!doctype html>
<html lang={lang}>
  <head>
    <Head {...props} />
    <OrganizationSchema />
    <slot name="head" />
  </head>
  <body>
    <Header minify={minify} alternates={props.alternates} />
    <CookieConsent />
    <Analytics />
    <BotIdInit />
    <main id="main">
      <slot />
    </main>
    <Footer minify={minify} />
    <Toast />
  </body>
</html>
