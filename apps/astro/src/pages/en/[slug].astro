---
import DefaultPage from '@/src/templates/DefaultPage.astro'
import LandingPage from '@/src/templates/LandingPage.astro'
import { fetchPage } from '@/src/utils/fetch-page'

const slug = Astro.params.slug || ''
const pageResult = await fetchPage(slug, 'en')

if (!pageResult) return Astro.rewrite('/en/404')

const { data, metadata } = pageResult
---

{
  data.type === 'landing' ? (
    <LandingPage page={data} metadata={metadata} />
  ) : (
    <DefaultPage page={data} metadata={metadata} />
  )
}
