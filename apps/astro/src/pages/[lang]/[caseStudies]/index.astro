---
export const prerender = true

import { LANGUAGES, type Language } from '@/global/languages'
import CaseStudiesPage, { fetchData } from '@/src/templates/CaseStudies.astro'

export function getStaticPaths() {
  const translation = {
    pl: {
      caseStudies: 'realizacje',
    },
    en: {
      caseStudies: 'case-studies',
    },
  }
  return LANGUAGES.map((lang) => ({
    params: { lang, caseStudies: translation[lang].caseStudies },
  }))
}

const lang = Astro.params.lang as Language
const data = await fetchData(lang, null, 1)
if (!LANGUAGES.includes(lang) || !data) return Astro.rewrite('/404')
---

<CaseStudiesPage {...data} currentPage={1} currentCategory={null} />
