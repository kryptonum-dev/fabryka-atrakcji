---
import Image from '@/components/ui/image'
import type { BlogPostCardProps } from '../ui/BlogPostCard'
import { getRelativeDate } from '@/src/utils/get-relative-date'
import { getLangFromPath, type Language } from '@/global/languages'
import CategoryTab from '../ui/CategoryTab.astro'

const { name, image, description, _createdAt, readingTime, category } = Astro.props as BlogPostCardProps

const lang = getLangFromPath(Astro.url.pathname) as Language
---

<section class="BlogHero max-width">
  <article>
    <Image
      {...image}
      sizes="(max-width: 37.4375rem) 94vw, (max-width: 56.1875rem) 83vw, (max-width: 69.3125rem) 768px, (max-width: 85.375rem) 50vw, 659px"
      priority
    />
    <header class="content">
      <h2>{name}</h2>
      <p>{description}</p>
      <div class="details">
        <div class="detail">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none"
            ><path fill="#F67258" d="M14.67 8A6.667 6.667 0 1 1 1.335 8a6.667 6.667 0 0 1 13.333 0Z"></path><path
              fill="#FAF7F7"
              fill-rule="evenodd"
              d="M8.003 4.833a.5.5 0 0 1 .5.5v2.46l1.52 1.52a.5.5 0 1 1-.707.707L7.649 8.354A.5.5 0 0 1 7.503 8V5.333a.5.5 0 0 1 .5-.5Z"
              clip-rule="evenodd"></path></svg
          >
          <span>{readingTime}</span>
        </div>
        <div class="detail">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none"
            ><path
              fill="#F67258"
              d="M5.17 1.667a.5.5 0 1 0-1 0V2.72c-.96.076-1.59.265-2.053.728-.463.463-.651 1.092-.728 2.052h13.227c-.076-.96-.265-1.59-.728-2.052-.463-.463-1.092-.652-2.052-.728V1.667a.5.5 0 1 0-1 0v1.008c-.444-.008-.94-.008-1.5-.008H6.669c-.56 0-1.056 0-1.5.008V1.667Z"
            ></path><path
              fill="#F67258"
              fill-rule="evenodd"
              d="M1.336 8c0-.56 0-1.056.009-1.5H14.66c.008.444.008.94.008 1.5v1.333c0 2.514 0 3.772-.78 4.553-.782.78-2.039.78-4.553.78H6.669c-2.514 0-3.771 0-4.552-.78-.781-.781-.781-2.038-.781-4.553V8Zm10 1.333a.667.667 0 1 0 0-1.333.667.667 0 0 0 0 1.333Zm0 2.667a.667.667 0 1 0 0-1.333.667.667 0 0 0 0 1.333ZM8.669 8.667a.667.667 0 1 1-1.333 0 .667.667 0 0 1 1.333 0Zm0 2.666a.667.667 0 1 1-1.333 0 .667.667 0 0 1 1.333 0Zm-4-2A.667.667 0 1 0 4.67 8a.667.667 0 0 0 0 1.333Zm0 2.667a.667.667 0 1 0 0-1.333.667.667 0 0 0 0 1.333Z"
              clip-rule="evenodd"></path></svg
          >
          <span>{getRelativeDate({ date: _createdAt, lang, upperCase: true })}</span>
        </div>
        <CategoryTab name={category.name} count={category.count} href={category.slug} />
      </div>
    </header>
  </article><svg xmlns="http://www.w3.org/2000/svg" width="2802" height="1653" fill="none"
    ><g filter="url(#filter0_f_7381_111024)"
      ><ellipse
        cx="806.329"
        cy="968.402"
        fill="#F7D8FF"
        rx="522.328"
        ry="400.599"
        transform="rotate(-180 806.329 968.402)"></ellipse><ellipse
        cx="1995.67"
        cy="875.621"
        fill="#EAE8FF"
        rx="522.328"
        ry="400.599"
        transform="rotate(-180 1995.67 875.621)"></ellipse><ellipse
        cx="2100.58"
        cy="838.5"
        fill="#FFF1F2"
        rx="406.576"
        ry="311.637"
        transform="rotate(-180 2100.58 838.5)"></ellipse><ellipse
        cx="1453.1"
        cy="879.441"
        fill="#FAF7F7"
        rx="406.576"
        ry="311.637"
        transform="rotate(-180 1453.1 879.441)"></ellipse><ellipse
        cx="1859.67"
        cy="567.803"
        fill="#FBECFF"
        rx="370.404"
        ry="283.803"
        transform="rotate(-180 1859.67 567.803)"></ellipse><ellipse
        cx="1613.24"
        cy="684.598"
        fill="#FBECFF"
        rx="370.404"
        ry="283.803"
        transform="rotate(-180 1613.24 684.598)"></ellipse><ellipse
        cx="848.301"
        cy="800.662"
        fill="#FFEAEA"
        rx="450.707"
        ry="345.475"
        transform="rotate(-180 848.301 800.662)"></ellipse><ellipse
        cx="2016.93"
        cy="832.503"
        fill="#FFDA58"
        rx="134.561"
        ry="69.313"
        transform="rotate(-180 2016.93 832.503)"></ellipse><ellipse
        cx="2016.93"
        cy="858.701"
        fill="#FFF1C0"
        rx="134.561"
        ry="69.313"
        transform="rotate(-180 2016.93 858.701)"></ellipse></g
    ><defs
      ><filter
        id="filter0_f_7381_111024"
        width="2801.18"
        height="1652.18"
        x=".409"
        y=".41"
        color-interpolation-filters="sRGB"
        filterUnits="userSpaceOnUse"
        ><feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood><feBlend
          in="SourceGraphic"
          in2="BackgroundImageFix"
          result="shape"></feBlend><feGaussianBlur result="effect1_foregroundBlur_7381_111024" stdDeviation="141.795"
        ></feGaussianBlur></filter
      ></defs
    ></svg
  >
</section>

<style lang="scss" scoped>
  .BlogHero {
    padding: 5rem 0 2rem;
    position: relative;
    article {
      display: grid;
      border-radius: clamp(0.5rem, calc(0.75vw / 0.48), 0.75rem);
      grid-template-columns: repeat(2, 1fr);
      overflow: hidden;
      > img {
        aspect-ratio: 659/370.59;
        min-height: 100%;
      }

      .content {
        padding: clamp(1rem, calc(2vw / 0.48), 2rem) clamp(0.25rem, calc(2.75vw / 0.48), 2.75rem);
        display: flex;
        flex-direction: column;
        background-color: var(--neutral-100, #faf7f7);

        h2 {
          color: var(--primary-700, #600d2a);
          font-weight: 700;
          line-height: 1.25;
          font-size: var(--typography-body-2xl, 1.5rem);
          letter-spacing: -0.04em;
          font-variant-numeric: lining-nums proportional-nums;
          font-family: 'Neue Haas Unica', 'Neue Haas Unica Fallback', sans-serif;
          margin-bottom: 0.75rem;
          overflow: hidden;
          text-overflow: ellipsis;
          text-transform: none;
        }

        p {
          font-size: var(--typography-body-xl, 1.125rem);
          line-height: 1.5;
          margin-bottom: auto;
        }

        .details {
          padding: 0.5rem clamp(0.25rem, calc(1.125vw / 0.48), 1.125rem);
          margin-top: clamp(1rem, calc(2vw / 0.48), 2rem);
          border-top: 1.5px solid var(--neutral-200, #f5f1ec);
          display: flex;
          gap: 0.625rem 1rem;
          align-items: center;
          flex-wrap: wrap;
          justify-content: flex-start;

          .detail {
            display: flex;
            align-items: center;
            gap: 0.375rem;
            font-size: var(--typography-body-m);
            line-height: 1.7;
            letter-spacing: -0.01em;

            &:nth-child(2) {
              margin-right: auto;
            }
          }
        }
      }
    }

    > svg {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      max-width: none;
      z-index: -1;
    }

    @media (max-width: 69.3125rem) {
      padding: clamp(4rem, calc(7.5vw / 0.48), 7.5rem) 0 clamp(2rem, calc(6vw / 0.48), 6rem);

      article {
        max-width: 48rem;
        margin: 0 auto;
        grid-template-columns: 1fr;

        > img {
          border-radius: clamp(0.5rem, calc(0.75vw / 0.48), 0.75rem);
        }
      }
    }

    @media (max-width: 29.9375rem) {
      padding: 4rem 0 2rem;
      article .content {
        padding: 1rem 0.5rem;

        .details {
          padding-right: 0;
          padding-left: 0;
        }
      }
    }
  }
</style>
