import Button from '@/src/components/ui/Button'
import type { Language } from '@/src/global/languages'
import type { ClientFormStateTypes, FormStatusTypes } from '@/src/global/types'
import styles from './styles.module.scss'
import { PortableTextQuery } from '../portable-text'

type Props = ClientFormStateTypes & {
  isSuccess: boolean | undefined
  handleRestart: (e: React.MouseEvent) => void
  lang: Language
  animate?: boolean
}

export const FormState_Query = (name: string) => `
    ${name} {
        success{
          ${PortableTextQuery('heading')}
          ${PortableTextQuery('paragraph')}
          highlightedSocialMedia[] -> {
            name,
            link,
            iconString,
          },
        },
        error{
          ${PortableTextQuery('heading')}
          ${PortableTextQuery('paragraph')}
        },
    },
`

const translations = {
  pl: {
    tryAgain: 'Spr√≥buj Ponownie',
  },
  en: {
    tryAgain: 'Try Again',
  },
}

export default function FormState({ success, error, isSuccess, handleRestart, lang, animate = true }: Props) {
  if (isSuccess === undefined) return null
  const t = translations[lang]

  return (
    <div className={styles.FormState} data-form-state data-is-success={!!isSuccess} data-animate={animate}>
      {isSuccess ? (
        <div className={styles.icon}>
          <SuccessIcon />
        </div>
      ) : (
        <ErrorIcon />
      )}
      <p className={styles.heading}>{isSuccess ? success.heading : error.heading}</p>
      <p className={styles.paragraph}>{isSuccess ? success.paragraph : error.paragraph}</p>
      {isSuccess ? (
        <ul className={styles.socials}>
          {success.highlightedSocialMedia.map(({ link, iconString, name }) => (
            <li>
              <a href={link} target="_blank" rel="noreferrer">
                <div dangerouslySetInnerHTML={{ __html: iconString }} />
                <span>{name}</span>
              </a>
            </li>
          ))}
        </ul>
      ) : (
        <Button type="button" onClick={handleRestart} className={styles.tryAgain} theme="primary">
          {t.tryAgain}
        </Button>
      )}
    </div>
  )
}

const SuccessIcon = () => (
  <svg xmlns="http://www.w3.org/2000/svg" width={24} height={25} fill="none">
    <g clipPath="url(#paint0_angular_6154_39253_clip_path)" data-figma-skip-parse="true">
      <foreignObject
        x={-1581.25}
        y={-1581.25}
        width={3162.51}
        height={3162.51}
        transform="matrix(.00727 .00727 -.00727 .00727 12 12.5)"
      >
        <div
          style={{
            background: 'conic-gradient(from 90deg,#798ddc 0deg,#e7c78f 90deg,#fa7468 266.4deg,#798ddc 360deg)',
            height: '100%',
            width: '100%',
            opacity: 1,
          }}
        />
      </foreignObject>
    </g>
    <path
      d="m13.087 21.888.645.382-.645-.382Zm.542-.916-.646-.382.646.382Zm-3.258 0-.645.382.645-.382Zm.542.916.646-.382-.646.382Zm-8.532-5.475.693-.287-.693.287Zm5.409 3.078-.013.75.013-.75Zm-2.703-.372-.287.693.287-.693Zm16.532-2.706.693.287-.693-.287Zm-5.409 3.078-.012-.75.012.75Zm2.703-.372.287.693-.287-.693Zm.7-15.882-.392.64.392-.64Zm1.65 1.65.64-.391-.64.392ZM4.388 3.238l-.392-.64.392.64Zm-1.651 1.65-.64-.391.64.392ZM9.403 19.71l.377-.649-.377.649Zm4.33 2.56.541-.916-1.29-.764-.543.916 1.291.764Zm-4.007-.916.542.916 1.29-.764-.541-.916-1.291.764Zm2.715.152a.52.52 0 0 1-.882 0l-1.291.764c.773 1.307 2.69 1.307 3.464 0l-1.29-.764ZM10.5 3.25h3v-1.5h-3v1.5ZM21.25 11v1h1.5v-1h-1.5Zm-18.5 1v-1h-1.5v1h1.5Zm-1.5 0c0 1.155 0 2.058.05 2.787.05.735.153 1.347.388 1.913l1.386-.574c-.147-.352-.233-.782-.278-1.441-.046-.666-.046-1.51-.046-2.685h-1.5Zm6.553 6.742c-1.256-.022-1.914-.102-2.43-.316L4.8 19.813c.805.334 1.721.408 2.977.43l.026-1.5ZM1.688 16.7A5.75 5.75 0 0 0 4.8 19.812l.574-1.386a4.25 4.25 0 0 1-2.3-2.3l-1.386.574ZM21.25 12c0 1.175 0 2.019-.046 2.685-.045.659-.131 1.089-.277 1.441l1.385.574c.235-.566.338-1.178.389-1.913.05-.729.049-1.632.049-2.787h-1.5Zm-5.027 8.241c1.256-.021 2.172-.095 2.977-.429l-.574-1.386c-.515.214-1.173.294-2.428.316l.025 1.5Zm4.704-4.115a4.25 4.25 0 0 1-2.3 2.3l.573 1.386a5.75 5.75 0 0 0 3.112-3.112l-1.386-.574ZM13.5 3.25c1.651 0 2.837 0 3.762.089.914.087 1.495.253 1.959.537l.783-1.279c-.739-.452-1.577-.654-2.6-.752-1.012-.096-2.282-.095-3.904-.095v1.5ZM22.75 11c0-1.622 0-2.892-.096-3.904-.097-1.023-.299-1.862-.751-2.6l-1.28.783c.285.464.451 1.045.538 1.96.088.924.089 2.11.089 3.761h1.5Zm-3.53-7.124a4.25 4.25 0 0 1 1.404 1.403l1.279-.783a5.75 5.75 0 0 0-1.899-1.899l-.783 1.28ZM10.5 1.75c-1.622 0-2.891 0-3.904.095-1.023.098-1.862.3-2.6.752l.783 1.28c.464-.285 1.045-.451 1.96-.538.924-.088 2.11-.089 3.761-.089v-1.5ZM2.75 11c0-1.651 0-2.837.089-3.762.087-.914.253-1.495.537-1.959l-1.279-.783c-.452.738-.654 1.577-.752 2.6C1.25 8.108 1.25 9.378 1.25 11h1.5Zm1.246-8.403a5.75 5.75 0 0 0-1.899 1.899l1.28.783a4.25 4.25 0 0 1 1.402-1.403l-.783-1.279Zm7.02 17.993c-.202-.343-.38-.646-.554-.884a2.229 2.229 0 0 0-.682-.645l-.754 1.297c.047.028.112.078.224.232.121.166.258.396.476.764l1.29-.764Zm-3.24-.349c.44.008.718.014.93.037.198.022.275.054.32.08l.754-1.297c-.293-.17-.598-.24-.909-.274-.298-.033-.657-.038-1.069-.045l-.025 1.5Zm6.498 1.113c.218-.367.355-.598.476-.764.112-.154.177-.204.224-.232l-.754-1.297c-.29.17-.5.395-.682.645-.173.238-.352.54-.555.884l1.291.764Zm1.924-2.612c-.412.007-.771.012-1.069.045-.311.035-.616.104-.909.274l.754 1.297c.045-.026.122-.058.32-.08.212-.023.49-.03.93-.037l-.026-1.5Z"
      data-figma-gradient-fill='{"type":"GRADIENT_ANGULAR","stops":[{"color":{"r":0.47450980544090271,"g":0.55294120311737061,"b":0.86274510622024536,"a":1.0},"position":0.0},{"color":{"r":0.90588235855102539,"g":0.78039216995239258,"b":0.56078433990478516,"a":1.0},"position":0.250},{"color":{"r":0.98039215803146362,"g":0.45490196347236633,"b":0.40784314274787903,"a":1.0},"position":0.74000000953674316},{"color":{"r":0.47450980544090271,"g":0.55294120311737061,"b":0.86274510622024536,"a":1.0},"position":1.0}],"stopsVar":[{"color":{"r":0.47450980544090271,"g":0.55294120311737061,"b":0.86274510622024536,"a":1.0},"position":0.0},{"color":{"r":0.90588235855102539,"g":0.78039216995239258,"b":0.56078433990478516,"a":1.0},"position":0.250},{"color":{"r":0.98039215803146362,"g":0.45490196347236633,"b":0.40784314274787903,"a":1.0},"position":0.74000000953674316},{"color":{"r":0.47450980544090271,"g":0.55294120311737061,"b":0.86274510622024536,"a":1.0},"position":1.0}],"transform":{"m00":14.545454978942871,"m01":-14.545410156250,"m02":11.999978065490723,"m10":14.545349121093750,"m11":14.545393943786621,"m12":-2.0454132556915283},"opacity":1.0,"blendMode":"NORMAL","visible":true}'
    />
    <g clipPath="url(#paint1_angular_6154_39253_clip_path)" data-figma-skip-parse="true">
      <foreignObject
        x={-1868.24}
        y={-1868.24}
        width={3736.49}
        height={3736.49}
        transform="matrix(.00327 .00284 -.00327 .00284 12 11.405)"
      >
        <div
          style={{
            background: 'conic-gradient(from 90deg,#798ddc 0deg,#e7c78f 90deg,#fa7468 266.4deg,#798ddc 360deg)',
            height: '100%',
            width: '100%',
            opacity: 1,
          }}
        />
      </foreignObject>
    </g>
    <path
      d="m10.99 14.808.445-.604-.445.604ZM12 8.606l-.536.525a.75.75 0 0 0 1.072 0L12 8.606Zm1.01 6.202-.445-.604.445.604ZM12 15.31v-.75.75Zm-.565-1.106c-.644-.474-1.468-1.147-2.123-1.896-.68-.775-1.062-1.502-1.062-2.093h-1.5c0 1.16.699 2.242 1.433 3.081.758.865 1.679 1.613 2.362 2.116l.89-1.208Zm-3.185-3.99c0-1.107.495-1.69 1.003-1.88.518-.194 1.342-.09 2.211.797l1.072-1.05C11.38 6.901 9.955 6.47 8.728 6.928 7.493 7.39 6.75 8.645 6.75 10.215h1.5Zm5.205 5.198c.683-.504 1.604-1.25 2.362-2.116.734-.839 1.433-1.92 1.433-3.081h-1.5c0 .591-.383 1.318-1.062 2.093-.655.749-1.48 1.422-2.123 1.896l.89 1.208Zm3.795-5.197c0-1.57-.743-2.825-1.978-3.287-1.227-.458-2.652-.027-3.808 1.153l1.072 1.05c.869-.888 1.694-.99 2.21-.798.51.19 1.004.774 1.004 1.882h1.5Zm-6.705 5.197c.392.289.83.648 1.455.648v-1.5c-.015 0-.032.003-.101-.035a4.676 4.676 0 0 1-.464-.32l-.89 1.207Zm2.02-1.208c-.243.18-.366.268-.464.321-.07.038-.086.035-.101.035v1.5c.625 0 1.063-.36 1.455-.648l-.89-1.208Z"
      data-figma-gradient-fill='{"type":"GRADIENT_ANGULAR","stops":[{"color":{"r":0.47450980544090271,"g":0.55294120311737061,"b":0.86274510622024536,"a":1.0},"position":0.0},{"color":{"r":0.90588235855102539,"g":0.78039216995239258,"b":0.56078433990478516,"a":1.0},"position":0.250},{"color":{"r":0.98039215803146362,"g":0.45490196347236633,"b":0.40784314274787903,"a":1.0},"position":0.74000000953674316},{"color":{"r":0.47450980544090271,"g":0.55294120311737061,"b":0.86274510622024536,"a":1.0},"position":1.0}],"stopsVar":[{"color":{"r":0.47450980544090271,"g":0.55294120311737061,"b":0.86274510622024536,"a":1.0},"position":0.0},{"color":{"r":0.90588235855102539,"g":0.78039216995239258,"b":0.56078433990478516,"a":1.0},"position":0.250},{"color":{"r":0.98039215803146362,"g":0.45490196347236633,"b":0.40784314274787903,"a":1.0},"position":0.74000000953674316},{"color":{"r":0.47450980544090271,"g":0.55294120311737061,"b":0.86274510622024536,"a":1.0},"position":1.0}],"transform":{"m00":6.5454545021057129,"m01":-6.5454344749450684,"m02":11.999990463256836,"m10":5.6802172660827637,"m11":5.6802344322204590,"m12":5.7249355316162109},"opacity":1.0,"blendMode":"NORMAL","visible":true}'
    />
    <defs>
      <clipPath id="paint0_angular_6154_39253_clip_path">
        <path d="m13.087 21.888.645.382-.645-.382Zm.542-.916-.646-.382.646.382Zm-3.258 0-.645.382.645-.382Zm.542.916.646-.382-.646.382Zm-8.532-5.475.693-.287-.693.287Zm5.409 3.078-.013.75.013-.75Zm-2.703-.372-.287.693.287-.693Zm16.532-2.706.693.287-.693-.287Zm-5.409 3.078-.012-.75.012.75Zm2.703-.372.287.693-.287-.693Zm.7-15.882-.392.64.392-.64Zm1.65 1.65.64-.391-.64.392ZM4.388 3.238l-.392-.64.392.64Zm-1.651 1.65-.64-.391.64.392ZM9.403 19.71l.377-.649-.377.649Zm4.33 2.56.541-.916-1.29-.764-.543.916 1.291.764Zm-4.007-.916.542.916 1.29-.764-.541-.916-1.291.764Zm2.715.152a.52.52 0 0 1-.882 0l-1.291.764c.773 1.307 2.69 1.307 3.464 0l-1.29-.764ZM10.5 3.25h3v-1.5h-3v1.5ZM21.25 11v1h1.5v-1h-1.5Zm-18.5 1v-1h-1.5v1h1.5Zm-1.5 0c0 1.155 0 2.058.05 2.787.05.735.153 1.347.388 1.913l1.386-.574c-.147-.352-.233-.782-.278-1.441-.046-.666-.046-1.51-.046-2.685h-1.5Zm6.553 6.742c-1.256-.022-1.914-.102-2.43-.316L4.8 19.813c.805.334 1.721.408 2.977.43l.026-1.5ZM1.688 16.7A5.75 5.75 0 0 0 4.8 19.812l.574-1.386a4.25 4.25 0 0 1-2.3-2.3l-1.386.574ZM21.25 12c0 1.175 0 2.019-.046 2.685-.045.659-.131 1.089-.277 1.441l1.385.574c.235-.566.338-1.178.389-1.913.05-.729.049-1.632.049-2.787h-1.5Zm-5.027 8.241c1.256-.021 2.172-.095 2.977-.429l-.574-1.386c-.515.214-1.173.294-2.428.316l.025 1.5Zm4.704-4.115a4.25 4.25 0 0 1-2.3 2.3l.573 1.386a5.75 5.75 0 0 0 3.112-3.112l-1.386-.574ZM13.5 3.25c1.651 0 2.837 0 3.762.089.914.087 1.495.253 1.959.537l.783-1.279c-.739-.452-1.577-.654-2.6-.752-1.012-.096-2.282-.095-3.904-.095v1.5ZM22.75 11c0-1.622 0-2.892-.096-3.904-.097-1.023-.299-1.862-.751-2.6l-1.28.783c.285.464.451 1.045.538 1.96.088.924.089 2.11.089 3.761h1.5Zm-3.53-7.124a4.25 4.25 0 0 1 1.404 1.403l1.279-.783a5.75 5.75 0 0 0-1.899-1.899l-.783 1.28ZM10.5 1.75c-1.622 0-2.891 0-3.904.095-1.023.098-1.862.3-2.6.752l.783 1.28c.464-.285 1.045-.451 1.96-.538.924-.088 2.11-.089 3.761-.089v-1.5ZM2.75 11c0-1.651 0-2.837.089-3.762.087-.914.253-1.495.537-1.959l-1.279-.783c-.452.738-.654 1.577-.752 2.6C1.25 8.108 1.25 9.378 1.25 11h1.5Zm1.246-8.403a5.75 5.75 0 0 0-1.899 1.899l1.28.783a4.25 4.25 0 0 1 1.402-1.403l-.783-1.279Zm7.02 17.993c-.202-.343-.38-.646-.554-.884a2.229 2.229 0 0 0-.682-.645l-.754 1.297c.047.028.112.078.224.232.121.166.258.396.476.764l1.29-.764Zm-3.24-.349c.44.008.718.014.93.037.198.022.275.054.32.08l.754-1.297c-.293-.17-.598-.24-.909-.274-.298-.033-.657-.038-1.069-.045l-.025 1.5Zm6.498 1.113c.218-.367.355-.598.476-.764.112-.154.177-.204.224-.232l-.754-1.297c-.29.17-.5.395-.682.645-.173.238-.352.54-.555.884l1.291.764Zm1.924-2.612c-.412.007-.771.012-1.069.045-.311.035-.616.104-.909.274l.754 1.297c.045-.026.122-.058.32-.08.212-.023.49-.03.93-.037l-.026-1.5Z" />
      </clipPath>
      <clipPath id="paint1_angular_6154_39253_clip_path">
        <path d="m10.99 14.808.445-.604-.445.604ZM12 8.606l-.536.525a.75.75 0 0 0 1.072 0L12 8.606Zm1.01 6.202-.445-.604.445.604ZM12 15.31v-.75.75Zm-.565-1.106c-.644-.474-1.468-1.147-2.123-1.896-.68-.775-1.062-1.502-1.062-2.093h-1.5c0 1.16.699 2.242 1.433 3.081.758.865 1.679 1.613 2.362 2.116l.89-1.208Zm-3.185-3.99c0-1.107.495-1.69 1.003-1.88.518-.194 1.342-.09 2.211.797l1.072-1.05C11.38 6.901 9.955 6.47 8.728 6.928 7.493 7.39 6.75 8.645 6.75 10.215h1.5Zm5.205 5.198c.683-.504 1.604-1.25 2.362-2.116.734-.839 1.433-1.92 1.433-3.081h-1.5c0 .591-.383 1.318-1.062 2.093-.655.749-1.48 1.422-2.123 1.896l.89 1.208Zm3.795-5.197c0-1.57-.743-2.825-1.978-3.287-1.227-.458-2.652-.027-3.808 1.153l1.072 1.05c.869-.888 1.694-.99 2.21-.798.51.19 1.004.774 1.004 1.882h1.5Zm-6.705 5.197c.392.289.83.648 1.455.648v-1.5c-.015 0-.032.003-.101-.035a4.676 4.676 0 0 1-.464-.32l-.89 1.207Zm2.02-1.208c-.243.18-.366.268-.464.321-.07.038-.086.035-.101.035v1.5c.625 0 1.063-.36 1.455-.648l-.89-1.208Z" />
      </clipPath>
    </defs>
  </svg>
)

const ErrorIcon = () => (
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none">
    <path
      d="m13.087 21.388.645.382-.645-.382Zm.542-.916-.646-.382.646.382Zm-3.258 0-.645.382.645-.382Zm.542.916.646-.382-.646.382Zm-8.532-5.475.693-.287-.693.287Zm5.409 3.078-.013.75.013-.75Zm-2.703-.372-.287.693.287-.693Zm16.532-2.706.693.287-.693-.287Zm-5.409 3.078-.012-.75.012.75Zm2.703-.372.287.693-.287-.693Zm.7-15.882-.392.64.392-.64Zm1.65 1.65.64-.391-.64.392ZM4.388 2.738l-.392-.64.392.64Zm-1.651 1.65-.64-.391.64.392ZM9.403 19.21l.377-.649-.377.649Zm4.33 2.56.541-.916-1.29-.764-.543.916 1.291.764Zm-4.007-.916.542.916 1.29-.764-.541-.916-1.291.764Zm2.715.152a.52.52 0 0 1-.882 0l-1.291.764c.773 1.307 2.69 1.307 3.464 0l-1.29-.764ZM10.5 2.75h3v-1.5h-3v1.5Zm10.75 7.75v1h1.5v-1h-1.5Zm-18.5 1v-1h-1.5v1h1.5Zm-1.5 0c0 1.155 0 2.058.05 2.787.05.735.153 1.347.388 1.913l1.386-.574c-.147-.352-.233-.782-.278-1.441-.046-.666-.046-1.51-.046-2.685h-1.5Zm6.553 6.742c-1.256-.022-1.914-.102-2.43-.316L4.8 19.313c.805.334 1.721.408 2.977.43l.026-1.5ZM1.688 16.2A5.75 5.75 0 0 0 4.8 19.312l.574-1.386a4.25 4.25 0 0 1-2.3-2.3l-1.386.574Zm19.562-4.7c0 1.175 0 2.019-.046 2.685-.045.659-.131 1.089-.277 1.441l1.385.574c.235-.566.338-1.178.389-1.913.05-.729.049-1.632.049-2.787h-1.5Zm-5.027 8.241c1.256-.021 2.172-.095 2.977-.429l-.574-1.386c-.515.214-1.173.294-2.428.316l.025 1.5Zm4.704-4.115a4.25 4.25 0 0 1-2.3 2.3l.573 1.386a5.75 5.75 0 0 0 3.112-3.112l-1.386-.574ZM13.5 2.75c1.651 0 2.837 0 3.762.089.914.087 1.495.253 1.959.537l.783-1.279c-.739-.452-1.577-.654-2.6-.752-1.012-.096-2.282-.095-3.904-.095v1.5Zm9.25 7.75c0-1.622 0-2.891-.096-3.904-.097-1.023-.299-1.862-.751-2.6l-1.28.783c.285.464.451 1.045.538 1.96.088.924.089 2.11.089 3.761h1.5Zm-3.53-7.124a4.25 4.25 0 0 1 1.404 1.403l1.279-.783a5.75 5.75 0 0 0-1.899-1.899l-.783 1.28ZM10.5 1.25c-1.622 0-2.891 0-3.904.095-1.023.098-1.862.3-2.6.752l.783 1.28c.464-.285 1.045-.451 1.96-.538.924-.088 2.11-.089 3.761-.089v-1.5ZM2.75 10.5c0-1.651 0-2.837.089-3.762.087-.914.253-1.495.537-1.959l-1.279-.783c-.452.738-.654 1.577-.752 2.6C1.25 7.61 1.25 8.878 1.25 10.5h1.5Zm1.246-8.403a5.75 5.75 0 0 0-1.899 1.899l1.28.783a4.25 4.25 0 0 1 1.402-1.403l-.783-1.279Zm7.02 17.993c-.202-.343-.38-.646-.554-.884a2.229 2.229 0 0 0-.682-.645l-.754 1.297c.047.028.112.078.224.232.121.166.258.396.476.764l1.29-.764Zm-3.24-.349c.44.008.718.014.93.037.198.022.275.054.32.08l.754-1.297c-.293-.17-.598-.24-.909-.274-.298-.033-.657-.038-1.069-.045l-.025 1.5Zm6.498 1.113c.218-.367.355-.598.476-.764.112-.154.177-.204.224-.232l-.754-1.297c-.29.17-.5.395-.682.645-.173.238-.352.54-.555.884l1.291.764Zm1.924-2.612c-.412.007-.771.012-1.069.045-.311.035-.616.104-.909.274l.754 1.297c.045-.026.122-.058.32-.08.212-.023.49-.03.93-.037l-.026-1.5Z"
      fill="#AA0B50"
    ></path>
    <path d="m14 8-4 4m0-4 4 4" stroke="#AA0B50" stroke-width="1.5" stroke-linecap="round"></path>
  </svg>
)
